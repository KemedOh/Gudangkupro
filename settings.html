<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pengaturan | GudangKu Pro</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
</head>

<body>
    <nav class="navbar navbar-expand-lg sticky-top">
        <div class="container-fluid">
            <button class="sidebar-toggle me-3" type="button" onclick="toggleSidebar()">
                <i class="fas fa-bars"></i>
            </button>
            <a class="navbar-brand d-flex align-items-center" href="#">
                <i class="fas fa-warehouse me-2"></i> GudangKu Pro
            </a>
            <div class="d-flex align-items-center">
                <div class="dropdown me-3">
                    <button class="btn btn-outline-light btn-sm dropdown-toggle" type="button"
                        data-bs-toggle="dropdown">
                        <i class="fas fa-bell"></i>
                        <span class="badge bg-danger rounded-pill" id="notificationCount">3</span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i
                                    class="fas fa-exclamation-triangle text-warning me-2"></i>Stok Rendah: Barang A</a>
                        </li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-clock text-info me-2"></i>Barang masuk
                                pending</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-chart-line text-success me-2"></i>Laporan
                                bulanan siap</a></li>
                    </ul>
                </div>
                <span class="navbar-text me-3 d-none d-md-block">Halo, <strong>Admin Gudang</strong>!</span>
                <button class="btn btn-outline-light btn-sm" type="button">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
    </nav>

    <div class="sidebar" id="mainSidebar">
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="index.html" onclick="showPage('dashboard')">
                    <i class="fas fa-home fa-fw me-2"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="barang.html" onclick="showPage('inventory')">
                    <i class="fas fa-boxes fa-fw me-2"></i> Data Barang
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="masuk.html" onclick="showPage('incoming')">
                    <i class="fas fa-arrow-circle-down fa-fw me-2"></i> Barang Masuk
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="keluar.html" onclick="showPage('outgoing')">
                    <i class="fas fa-arrow-circle-up fa-fw me-2"></i> Barang Keluar
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="laporan.html" onclick="showPage('reports')">
                    <i class="fas fa-chart-line fa-fw me-2"></i> Laporan
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="supplier.html" onclick="showPage('suppliers')">
                    <i class="fas fa-truck fa-fw me-2"></i> Supplier
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="alert.html" onclick="showPage('alerts')">
                    <i class="fas fa-bell fa-fw me-2"></i> Peringatan
                </a>
            </li>
            <hr class="my-3">
            <li class="nav-item">
                <a class="nav-link" href="settings.html" onclick="showPage('settings')">
                    <i class="fas fa-cog fa-fw me-2"></i> Pengaturan
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="help.html" onclick="showPage('help')">
                    <i class="fas fa-question-circle fa-fw me-2"></i> Bantuan
                </a>
            </li>
            <hr class="my-3">
            <li class="nav-item">
                <a class="nav-link" href="login.html" onclick="showPage('login')">
                    <i class="fas fa-sign-in-alt fa-fw me-2"></i> Login
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="login.html" onclick="showPage('login')">
                    <i class="fas fa-user-circle fa-fw me-2"></i> Login
                </a>
            </li>
        </ul>
    </div>

    <div class="main-content">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="fw-bold mb-0">Pengaturan Sistem</h2>
                <p class="text-muted mb-0">Atur preferensi dan konfigurasi aplikasi Anda.</p>
            </div>
            <div>
                <span class="badge bg-secondary fs-6 px-3 py-2">
                    <i class="fas fa-calendar-day me-1"></i>
                    <span id="currentDate"></span>
                </span>
            </div>
        </div>

        <div class="chart-card mb-4">
            <h5 class="mb-4"><i class="fas fa-cogs text-secondary me-2"></i>Pengaturan Umum</h5>
            <form id="formGeneralSettings">
                <div class="mb-3">
                    <label for="appName" class="form-label">Nama Aplikasi</label>
                    <input type="text" class="form-control" id="appName" value="GudangKu Pro" required>
                </div>
                <div class="mb-3">
                    <label for="adminEmail" class="form-label">Email Administrator Utama</label>
                    <input type="email" class="form-control" id="adminEmail" value="admin@gudangku.com" required>
                </div>
                <div class="mb-3">
                    <label for="lokasiGudang" class="form-label">Lokasi Gudang Default</label>
                    <input type="text" class="form-control" id="lokasiGudang" value="Kantor Pusat, Jakarta">
                </div>
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-secondary"><i class="fas fa-save me-2"></i> Simpan Pengaturan
                        Umum</button>
                </div>
            </form>
        </div>

        <div class="chart-card mb-4">
            <h5 class="mb-4"><i class="fas fa-bell text-warning me-2"></i>Pengaturan Notifikasi</h5>
            <form id="formNotificationSettings">
                <div class="mb-3 form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="emailNotifStokRendah" checked>
                    <label class="form-check-label" for="emailNotifStokRendah">Kirim notifikasi email untuk stok
                        rendah</label>
                </div>
                <div class="mb-3">
                    <label for="thresholdStokRendah" class="form-label">Ambang Batas Stok Rendah (Unit)</label>
                    <input type="number" class="form-control" id="thresholdStokRendah" min="1" value="5">
                    <div class="form-text text-muted">Barang akan ditandai stok rendah jika jumlahnya di bawah ambang
                        batas ini.</div>
                </div>
                <div class="mb-3 form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="notifKadaluwarsa">
                    <label class="form-check-label" for="notifKadaluwarsa">Aktifkan notifikasi barang mendekati
                        kedaluwarsa</label>
                </div>
                <div class="mb-3">
                    <label for="daysBeforeExpiry" class="form-label">Peringatan Kedaluwarsa (Hari Sebelum)</label>
                    <input type="number" class="form-control" id="daysBeforeExpiry" min="1" value="30">
                    <div class="form-text text-muted">Peringatan akan muncul X hari sebelum tanggal kedaluwarsa.</div>
                </div>
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-warning"><i class="fas fa-save me-2"></i> Simpan Pengaturan
                        Notifikasi</button>
                </div>
            </form>
        </div>

        <div class="chart-card mb-4">
            <h5 class="mb-4"><i class="fas fa-user-circle text-primary me-2"></i>Pengaturan Akun</h5>
            <form id="formAccountSettings">
                <div class="mb-3">
                    <label for="username" class="form-label">Username</label>
                    <input type="text" class="form-control" id="username" value="admin_gudang" disabled>
                    <div class="form-text text-muted">Username tidak dapat diubah.</div>
                </div>
                <div class="mb-3">
                    <label for="currentPassword" class="form-label">Password Saat Ini</label>
                    <input type="password" class="form-control" id="currentPassword"
                        placeholder="Masukkan password saat ini">
                </div>
                <div class="mb-3">
                    <label for="newPassword" class="form-label">Password Baru</label>
                    <input type="password" class="form-control" id="newPassword" placeholder="Masukkan password baru">
                </div>
                <div class="mb-3">
                    <label for="confirmNewPassword" class="form-label">Konfirmasi Password Baru</label>
                    <input type="password" class="form-control" id="confirmNewPassword"
                        placeholder="Konfirmasi password baru">
                </div>
                <div class="d-grid gap-2">
                    <button type="submit" class="btn btn-primary"><i class="fas fa-key me-2"></i> Ubah Password</button>
                </div>
            </form>
        </div>

        <div class="chart-card mb-4">
            <h5 class="mb-4"><i class="fas fa-database text-success me-2"></i>Data Master: Kategori Barang</h5>
            <form id="formKategoriBarang" class="mb-3">
                <div class="input-group">
                    <input type="text" class="form-control" id="newCategoryName" placeholder="Nama Kategori Baru"
                        required>
                    <button class="btn btn-success" type="submit"><i class="fas fa-plus me-2"></i>Tambah
                        Kategori</button>
                </div>
            </form>
            <div class="table-responsive">
                <table class="table table-dark table-striped table-hover align-middle" id="categoryTable">
                    <thead>
                        <tr>
                            <th>No.</th>
                            <th>Nama Kategori</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>Elektronik</td>
                            <td><button class="btn btn-danger btn-sm" title="Hapus"><i
                                        class="fas fa-trash-alt"></i></button></td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>Aksesoris</td>
                            <td><button class="btn btn-danger btn-sm" title="Hapus"><i
                                        class="fas fa-trash-alt"></i></button></td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>Rumah Tangga</td>
                            <td><button class="btn btn-danger btn-sm" title="Hapus"><i
                                        class="fas fa-trash-alt"></i></button></td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>Makanan</td>
                            <td><button class="btn btn-danger btn-sm" title="Hapus"><i
                                        class="fas fa-trash-alt"></i></button></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </div>

    <footer class="footer">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6">
                    <span>&copy; 2025 GudangKu Pro. All Rights Reserved.</span>
                </div>
                <div class="col-md-6 text-end">
                    <span>Version 2.1.0 | <a href="#" class="text-primary">Support</a></span>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
    <script>
        // Update current date (from your existing script)
        function updateCurrentDate() {
            const now = new Date();
            const options = {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('id-ID', options);
        }

        // Toggle sidebar for mobile (from your existing script)
        function toggleSidebar() {
            const sidebar = document.getElementById('mainSidebar');
            sidebar.classList.toggle('show');
        }

        // Handle navigation link active state (adapted from your existing script)
        document.addEventListener('DOMContentLoaded', function () {
            const currentPath = window.location.pathname.split('/').pop();
            document.querySelectorAll('.nav-link').forEach(link => {
                if (link.getAttribute('href') === currentPath) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
            updateCurrentDate(); // Initialize date on load

            // Close sidebar when clicking outside (mobile) - refined from your existing script
            document.addEventListener('click', function (event) {
                const sidebar = document.getElementById('mainSidebar');
                const sidebarToggle = document.querySelector('.sidebar-toggle');

                if (window.innerWidth <= 768 &&
                    !sidebar.contains(event.target) &&
                    !sidebarToggle.contains(event.target) &&
                    sidebar.classList.contains('show')) {
                    sidebar.classList.remove('show');
                }
            });
        });

        // Form submission simulation for General Settings
        document.getElementById('formGeneralSettings').addEventListener('submit', function (event) {
            event.preventDefault();
            const appName = document.getElementById('appName').value;
            const adminEmail = document.getElementById('adminEmail').value;
            const lokasiGudang = document.getElementById('lokasiGudang').value;
            alert(`Pengaturan Umum berhasil disimpan!\nNama Aplikasi: ${appName}\nEmail Admin: ${adminEmail}\nLokasi: ${lokasiGudang}`);
        });

        // Form submission simulation for Notification Settings
        document.getElementById('formNotificationSettings').addEventListener('submit', function (event) {
            event.preventDefault();
            const emailNotif = document.getElementById('emailNotifStokRendah').checked;
            const threshold = document.getElementById('thresholdStokRendah').value;
            const notifKadaluwarsa = document.getElementById('notifKadaluwarsa').checked;
            const daysExpiry = document.getElementById('daysBeforeExpiry').value;
            alert(`Pengaturan Notifikasi berhasil disimpan!\nEmail Notif Stok Rendah: ${emailNotif ? 'Aktif' : 'Nonaktif'}\nAmbang Batas: ${threshold}\nNotif Kadaluwarsa: ${notifKadaluwarsa ? 'Aktif' : 'Nonaktif'}\nHari Sebelum Kadaluwarsa: ${daysExpiry}`);
        });

        // Form submission simulation for Account Settings (Change Password)
        document.getElementById('formAccountSettings').addEventListener('submit', function (event) {
            event.preventDefault();
            const currentPass = document.getElementById('currentPassword').value;
            const newPass = document.getElementById('newPassword').value;
            const confirmNewPass = document.getElementById('confirmNewPassword').value;

            if (newPass !== confirmNewPass) {
                alert('Konfirmasi password baru tidak cocok!');
                return;
            }
            if (!currentPass || !newPass) {
                alert('Password saat ini dan password baru tidak boleh kosong!');
                return;
            }
            // In a real app, you'd validate currentPass against stored hash
            alert('Password berhasil diubah!');
            this.reset();
        });

        // Form submission simulation for Kategori Barang (Data Master)
        document.getElementById('formKategoriBarang').addEventListener('submit', function (event) {
            event.preventDefault();
            const newCategoryName = document.getElementById('newCategoryName').value;

            if (!newCategoryName) {
                alert('Nama kategori tidak boleh kosong!');
                return;
            }

            const tableBody = document.getElementById('categoryTable').getElementsByTagName('tbody')[0];
            const newRow = tableBody.insertRow(); // Insert at the end

            const rowCount = tableBody.rows.length;
            newRow.insertCell(0).textContent = rowCount;
            newRow.insertCell(1).textContent = newCategoryName;

            const actionsCell = newRow.insertCell(2);
            actionsCell.innerHTML = `<button class="btn btn-danger btn-sm" title="Hapus"><i class="fas fa-trash-alt"></i></button>`;

            alert(`Kategori "${newCategoryName}" berhasil ditambahkan!`);
            this.reset();
        });

        // Simulate deleting a category (client-side only)
        document.getElementById('categoryTable').addEventListener('click', function (event) {
            if (event.target.closest('.btn-danger') && event.target.closest('.btn-danger').title === 'Hapus') {
                const row = event.target.closest('tr');
                if (confirm('Anda yakin ingin menghapus kategori ini?')) {
                    row.remove();
                    // Re-number rows after deletion (optional, for client-side demo)
                    const tableRows = document.querySelectorAll('#categoryTable tbody tr');
                    tableRows.forEach((r, index) => {
                        r.cells[0].textContent = index + 1;
                    });
                    alert('Kategori berhasil dihapus!');
                }
            }
        });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>

    <script src="https://kit.fontawesome.com/your-font-awesome-kit-code.js" crossorigin="anonymous"></script>

    <script src="assets/js/script.js"></script>
</body>

</html>